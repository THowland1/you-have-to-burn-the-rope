function t(t,e,i,s){Object.defineProperty(t,e,{get:i,set:s,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},s={},o=e.parcelRequiref536;null==o&&((o=function(t){if(t in i)return i[t].exports;if(t in s){var e=s[t];delete s[t];var o={id:t,exports:{}};return i[t]=o,e.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){s[t]=e},e.parcelRequiref536=o),o.register("27Lyk",(function(e,i){var s,o;t(e.exports,"register",(()=>s),(t=>s=t)),t(e.exports,"resolve",(()=>o),(t=>o=t));var a={};s=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)a[e[i]]=t[e[i]]},o=function(t){var e=a[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),o("27Lyk").register(JSON.parse('{"2BF4I":"index.e00e8786.js","8SUUV":"now-youre-a-hero.458a3920.mp3","2abmd":"tunnel.4510aa23.mp3","44Mv5":"boss-fight.a6bc8a1a.mp3","4z3LP":"axe-throw.47bed5c8.mp3","5P0OA":"rope-explosion.5a038415.mp3","hARWy":"boss-explosion.6a1b4b9e.mp3","kTcPo":"door-slam.3830eb47.mp3","jZcw7":"eye-laser.81071500.mp3","apODL":"death.541239ad.mp3","5WApJ":"jump.1ff1e874.mp3","7tLmz":"land.f4ce8fb3.mp3","j5FlV":"flame-sprites.7d1700c9.png","3Lkac":"explosion-1_36x36.dfe441ed.png","9Zyha":"explosion-2_36x36.b0a46f4e.png","bGbNm":"explosion-3_36x36.9e0e7113.png","jLr2r":"explosion-4_36x36.13b6ae47.png","ltPPz":"explosion-5_36x36.1ff227a8.png","fxIVH":"explosion-6_36x36.1a5e112b.png","2XoEW":"explosion-7_36x36.39e3d145.png","3wOay":"chandelier_160x96.3cd30a65.png","hyBbh":"rope_8x192.9a0a57f8.png","4QDKv":"back-door_32x64.9644e305.png","7KoA1":"plume-1_43x21.4e984f4b.png","667pP":"plume-2_43x21.2025dcef.png","8r3C2":"plume-3_43x21.a07d893b.png","5zhPX":"plume-4_43x21.74e0a1bf.png","ChCQb":"plume-5_43x21.9fafd5f4.png","3GX9f":"plume-6_43x21.88e5fdbd.png","dxwa7":"player-fall_30x36.4aeaf3a4.png","8h0tV":"player-hit_30x36.d9aa7b3f.png","3KlFR":"player-jump_30x36.301c8c43.png","7JVrz":"player-still_30x36.002a4e2f.png","h75ca":"player-throw_30x36.05d9b194.png","eviKv":"player-walk-1_30x36.5a7eec47.png","l8X2g":"player-walk-2_30x36.8519aefd.png","b2z88":"player-walk-3_30x36.301c8c43.png","cWExs":"stick_30x6.64c7dfda.png","lHjoE":"flame-1_28x28.ea1afe77.png","na5dw":"flame-2_28x28.1032aa57.png","iWslX":"flame-3_28x28.a4263105.png","hXnwJ":"laser-1_20x20.7ff2dd17.png","lnBAz":"laser-2_20x20.31acd6e2.png","7EplB":"laser-3_20x20.421aab6c.png","4Svq4":"laser-4_20x20.3a46b7cb.png","9vpnS":"laser-5_20x20.fcb4d22c.png","2q010":"laser-6_20x20.fcb4d22c.png","4bprI":"laser-7_20x20.52a7a663.png","dNc9w":"boss-attack_204x256.34ca97ec.png","eaxgJ":"boss-die_192x256.8eb8c1e3.png","iVIce":"boss-lookup_192x256.cb05ea2a.png","eNkgn":"boss-move_204x256.e49edfc0.png","eaKP5":"boss-still_204x256.88b6a40d.png","9gHod":"axe_18x18.3e575fb0.png","8epLs":"credits-1_200x200.7a99df19.png","8QBwA":"credits-2_200x200.4f728692.png","4HnJa":"credits-3_200x200.a6eb5b4e.png","aIy24":"credits-4_200x200.c9af29eb.png","eIDjz":"serviceworker.js","hhCdh":"bg.7daaac2d.png"}'));const a={x:0,y:0};class n{constructor({x:t,y:e,height:i,width:s}){this.x=t,this.y=e,this.height=i,this.width=s}get left(){return this.x}get right(){return this.left+this.width}get center(){return this.left+.5*this.width}get yCenter(){return this.top+.5*this.height}get top(){return this.y}get bottom(){return this.top+this.height}get localLeft(){return this.x-a.x}get localRight(){return this.localLeft+this.width}get localTop(){return this.y-a.y}get localBottom(){return this.localTop+this.height}intersectsX({left:t,right:e}){return this.right>=t&&this.right<=e||this.left>=t&&this.right<=e}intersectsY({top:t,bottom:e}){return this.bottom<=e&&this.bottom>=t||this.top<=e&&this.top>=t}intersects({left:t,right:e,top:i,bottom:s}){return this.intersectsX({left:t,right:e})&&this.intersectsY({top:i,bottom:s})}}const r=new class{constructor(){this.canvas=document.querySelector("canvas"),this.context=this.canvas.getContext("2d")}drawImage(t,...e){if(4===e.length)this.context.drawImage(t,...e.map((t=>1*t)));else if(8===e.length){const[i,s,o,a]=e.slice(0,4),n=e.slice(4,8);this.context.drawImage(t,i,s,o,a,...n.map((t=>1*t)))}}scale(...t){this.context.scale(...t)}clearRect(...t){this.context.clearRect(...t.map((t=>1*t)))}fillRect(...t){this.context.fillRect(...t.map((t=>1*t)))}fillText(t,...e){this.context.fillText(t,...e.map((t=>1*t)))}setTransform(t,e,i,s,o,a){this.context.setTransform(t,e,i,s,o,a)}rotate(t){this.context.rotate(t)}save(){this.context.save()}restore(){this.context.restore()}set fillStyle(t){this.context.fillStyle=t}set font(t){this.context.font=t}set textAlign(t){this.context.textAlign=t}},h=r.canvas,l=r;function m(){const t=window.outerWidth,e=window.outerWidth;if(t>=704&&e>=512)h.style.height="512px",h.style.width="704px";else{h.style.height=.7272727272727273*t+"px",h.style.width=`${t}px`}}h.height=512,h.width=704,m(),addEventListener("resize",m);var d;d=new URL(o("27Lyk").resolve("8SUUV"),import.meta.url).toString();class p{constructor(){this.audio=new Audio(new URL(d)),this.startTime=null}play(){this.startTime=(new Date).valueOf(),this.audio.play()}set currentTime(t){this.audio.currentTime=t;const e=new Date;e.setSeconds(e.getSeconds()-t),this.startTime=e.valueOf()}get currentTime(){return this.startTime?((new Date).valueOf()-this.startTime)/1e3:0}}class c{constructor(t){this.cache=[],this.src=t}play(t){let e;const i=this.cache.find((t=>t.ended));i?e=i:(e=new Audio(this.src),this.cache.push(e)),e.volume=t,e.play()}}var w;w=new URL(o("27Lyk").resolve("2abmd"),import.meta.url).toString();var f;f=new URL(o("27Lyk").resolve("44Mv5"),import.meta.url).toString();var g;g=new URL(o("27Lyk").resolve("4z3LP"),import.meta.url).toString();var u;u=new URL(o("27Lyk").resolve("5P0OA"),import.meta.url).toString();var y;y=new URL(o("27Lyk").resolve("hARWy"),import.meta.url).toString();var x;x=new URL(o("27Lyk").resolve("kTcPo"),import.meta.url).toString();var v;v=new URL(o("27Lyk").resolve("jZcw7"),import.meta.url).toString();var R;R=new URL(o("27Lyk").resolve("apODL"),import.meta.url).toString();var L;L=new URL(o("27Lyk").resolve("5WApJ"),import.meta.url).toString();var b;b=new URL(o("27Lyk").resolve("7tLmz"),import.meta.url).toString();const S=new class{constructor(){this.volume=1,this.tunnelMusic=new Audio(new URL(w)),this.tunnelMusic.loop=!0,this.tunnelMusic.volume=this.volume,this.bossFightMusic=new Audio(new URL(f)),this.bossFightMusic.loop=!0,this.bossFightMusic.volume=this.volume,this.axeThrowSound=new c(new URL(g)),this.ropeExplosionSound=new c(new URL(u)),this.bossExplosionSound=new c(new URL(y)),this.doorSlamSound=new c(new URL(x)),this.laserSound=new c(new URL(v)),this.deathSound=new c(new URL(R)),this.jumpSound=new c(new URL(L)),this.landSound=new c(new URL(b)),this.endCreditsMusic=new p,this.volume0Btn=document.getElementById("volume-0"),this.volume1Btn=document.getElementById("volume-1"),this.volume0Btn.addEventListener("click",(()=>this.setVolume(0))),this.volume1Btn.addEventListener("click",(()=>this.setVolume(1)))}playAxeThrowSound(){this.axeThrowSound.play(this.volume)}playRopeExplosionSound(){this.ropeExplosionSound.play(this.volume)}playBossExplosionSound(){this.bossExplosionSound.play(this.volume)}playDoorslamSound(){this.doorSlamSound.play(this.volume)}playLaserSound(){this.laserSound.play(this.volume)}playDeathSound(){this.deathSound.play(this.volume)}playJumpSound(){this.jumpSound.play(this.volume)}playLandSound(){this.landSound.play(this.volume)}setVolume(t){this.volume=t,this.tunnelMusic.volume=t,this.bossFightMusic.volume=t,this.endCreditsMusic.audio.volume=t,this.volume>0?(this.volume0Btn.classList.remove("hidden"),this.volume1Btn.classList.add("hidden")):(this.volume0Btn.classList.add("hidden"),this.volume1Btn.classList.remove("hidden"))}},_={now:(new Date).valueOf(),msPerFrame:1e3/60};function k(t){const e=new Image;return e.src=t,e}var I;I=new URL(o("27Lyk").resolve("j5FlV"),import.meta.url).toString();class H extends n{constructor({left:t,top:e}){super({x:t,y:e,width:32,height:64}),this.img=k(new URL(I)),this.framesPerSecond=10,this.frameCount=3,this.frameIndex=0,this.frameUpdated=(new Date).valueOf()}draw(){_.now-this.frameUpdated>1e3/this.framesPerSecond&&(this.frameIndex=(this.frameIndex+1)%this.frameCount,this.frameUpdated=_.now);const t=32*this.frameIndex,e=this.width,i=this.height,s=this.localLeft,o=this.localTop,a=this.width,n=this.height;this.img&&l.drawImage(this.img,t,0,e,i,s,o,a,n)}}const U=[new H({left:3488,top:576}),new H({left:3552,top:416}),new H({left:3488,top:256}),new H({left:4960,top:576}),new H({left:4896,top:416}),new H({left:4960,top:256})];class E{constructor({images:t,fps:e,loop:i}){this.fps=e,this.images=t,this.frameUpdated=(new Date).valueOf(),this.currentIndex=0}get(){const t=(new Date).valueOf();return t-this.frameUpdated>1e3/this.fps&&(this.frameUpdated=t,this.currentIndex=(this.currentIndex+1)%this.images.length),this.images[this.currentIndex]}}const F=new class{constructor(){this.health=1,this.deathTime=null,this.show=!1}die(){this.deathTime=(new Date).valueOf()}update(){this.show&&(this.deathTime?this.health>1e-4&&(this.health=1*Math.exp(-((new Date).valueOf()-this.deathTime)/200)):this.health=1-.99*(1-this.health),this.draw())}draw(){l.fillStyle="white",l.fillRect(16,16,672,20),l.fillRect(16,32,154,24),l.fillStyle="black",l.fillRect(18,18,668,16),l.fillRect(18,30,150,24),l.fillStyle="red",l.fillRect(20,20,664*this.health,12),l.fillStyle="white",l.textAlign="left",l.font="bold 14px Inter",l.fillText("Grinning Colossus",28,48)}};class T extends n{constructor({left:t,top:e,right:i,bottom:s}){super({x:t,y:e,width:i-t,height:s-e})}draw(){l.fillStyle="#00f3",l.fillRect(this.localLeft,this.localTop,this.width,this.height)}}class A extends T{constructor({top:t,right:e,bottom:i}){super({left:e-32,top:t,right:e,bottom:i})}}class O extends T{constructor({left:t,top:e,bottom:i}){super({left:t,top:e,right:t+32,bottom:i})}}class B extends T{constructor({left:t,top:e,right:i}){super({left:t,top:e,right:i,bottom:e+32})}}class P extends T{constructor({left:t,right:e,bottom:i}){super({left:t,top:i-32,right:e,bottom:i})}}const M=[new O({left:192,top:0,bottom:480}),new A({top:0,right:128,bottom:576}),new P({left:192,right:1536,bottom:480}),new B({left:96,top:544,right:1632}),new O({left:1600,top:416,bottom:576}),new A({top:320,right:1536,bottom:480}),new P({left:1504,right:2016,bottom:352}),new B({left:1600,top:416,right:1920}),new O({left:1984,top:320,bottom:480}),new A({top:416,right:1920,bottom:576}),new P({left:1984,right:2688,bottom:480}),new B({left:1888,top:544,right:2592}),new O({left:2656,top:448,bottom:640}),new A({top:544,right:2592,bottom:736}),new P({left:2656,right:2944,bottom:640}),new B({left:2560,top:704,right:2848}),new O({left:2912,top:608,bottom:800}),new A({top:704,right:2848,bottom:896}),new P({left:2912,right:3488,bottom:800}),new B({left:2816,top:864,right:5056}),new A({top:160,right:3456,bottom:768}),new O({left:3616,top:384,bottom:608}),new O({top:704,left:3616,bottom:800}),new T({left:3616,top:768,right:3744,bottom:800}),new T({left:3520,top:672,right:3552,bottom:704}),new T({left:3552,top:640,right:3584,bottom:672}),new T({left:3584,top:608,right:3616,bottom:640}),new T({left:3520,top:512,right:3552,bottom:544}),new T({left:3488,top:480,right:3520,bottom:512}),new T({left:3456,top:448,right:3488,bottom:480}),new T({left:3520,top:352,right:3552,bottom:384}),new T({left:3552,top:320,right:3584,bottom:352}),new T({left:3584,top:288,right:3616,bottom:320}),new T({left:3584,top:288,right:3680,bottom:320}),new T({left:3424,top:160,right:3680,bottom:192}),new T({left:3520,top:352,right:3648,bottom:384}),new T({left:3456,top:512,right:3552,bottom:544}),new T({left:3520,top:672,right:3616,bottom:704}),new P({left:4736,right:4864,bottom:800}),new O({left:4736,top:768,bottom:800}),new B({left:4736,top:768,right:4800}),new O({left:4928,top:832,bottom:864}),new O({left:4960,top:800,bottom:832}),new O({left:4992,top:768,bottom:800}),new O({left:5024,top:544,bottom:768}),new B({left:4928,right:4960,top:832}),new B({left:4960,right:4992,top:800}),new B({left:4992,right:5024,top:768}),new A({right:4864,top:704,bottom:800}),new P({left:4864,right:4960,bottom:704}),new A({right:4960,top:672,bottom:704}),new A({right:4928,top:640,bottom:672}),new A({right:4896,top:608,bottom:640}),new B({left:4864,right:4896,top:608}),new B({left:4896,right:4928,top:640}),new B({left:4928,right:4960,top:672}),new A({right:4864,top:384,bottom:608}),new O({left:4928,top:512,bottom:544}),new O({left:4960,top:480,bottom:512}),new O({left:4992,top:448,bottom:480}),new O({left:5024,top:192,bottom:448}),new B({left:4928,right:4960,top:512}),new B({left:4960,right:4992,top:480}),new B({left:4992,right:5024,top:448}),new P({left:4928,right:5024,bottom:544}),new P({left:4864,right:4960,bottom:384}),new A({right:4960,top:352,bottom:384}),new A({right:4928,top:320,bottom:352}),new A({right:4896,top:288,bottom:320}),new B({left:4800,right:4896,top:288}),new B({left:4896,right:4928,top:320}),new B({left:4928,right:4960,top:352}),new T({left:3680,top:320,right:3744,bottom:352}),new T({left:3808,top:320,right:3872,bottom:352}),new T({left:3936,top:320,right:4e3,bottom:352}),new T({left:4064,top:320,right:4128,bottom:352}),new T({left:4352,top:320,right:4416,bottom:352}),new T({left:4480,top:320,right:4544,bottom:352}),new T({left:4608,top:320,right:4672,bottom:352}),new T({left:4736,top:320,right:4800,bottom:352}),new P({left:4800,right:5024,bottom:192}),new P({left:3680,right:4800,bottom:160}),new P({left:4224,right:4256,bottom:192}),new A({right:4256,top:160,bottom:192}),new O({left:4224,top:160,bottom:192}),new A({right:3680,top:352,bottom:768}),new T({left:3776,top:640,right:3840,bottom:672}),new T({left:3904,top:544,right:3968,bottom:576}),new T({left:4096,top:512,right:4160,bottom:544}),new T({left:4320,top:512,right:4384,bottom:544}),new T({left:4512,top:544,right:4576,bottom:576}),new T({left:4640,top:640,right:4704,bottom:672}),new O({left:4800,top:352,bottom:768})];var D;D=new URL(o("27Lyk").resolve("3Lkac"),import.meta.url).toString();var C;C=new URL(o("27Lyk").resolve("9Zyha"),import.meta.url).toString();var j;j=new URL(o("27Lyk").resolve("bGbNm"),import.meta.url).toString();var z;z=new URL(o("27Lyk").resolve("jLr2r"),import.meta.url).toString();var W;W=new URL(o("27Lyk").resolve("ltPPz"),import.meta.url).toString();var V;V=new URL(o("27Lyk").resolve("fxIVH"),import.meta.url).toString();var N;N=new URL(o("27Lyk").resolve("2XoEW"),import.meta.url).toString();const X=[k(new URL(D)),k(new URL(C)),k(new URL(j)),k(new URL(z)),k(new URL(W)),k(new URL(V)),k(new URL(N))];class J extends n{constructor({left:t,top:e}){super({x:t,y:e,width:36,height:36}),this.frames=new E({images:X,fps:14})}draw(){l.drawImage(this.frames.get(),this.localLeft,this.localTop,this.width,this.height)}}const K=new class{constructor(){this.explosions=[]}add({left:t,top:e}){this.explosions.push(new J({left:t,top:e}))}update(){this.explosions=this.explosions.filter((t=>t.frames.currentIndex<6)),this.draw()}draw(){this.explosions.forEach((t=>t.draw()))}};var q;q=new URL(o("27Lyk").resolve("3wOay"),import.meta.url).toString();const G=new class extends n{constructor(){super({x:4160,y:384,width:160,height:96}),this.img=k(new URL(q)),this.show=!0,this.dropped=!1,this.velocity={y:0}}draw(){this.img&&l.drawImage(this.img,this.localLeft,this.localTop,this.width,this.height)}update(){this.show&&(this.dropped&&(this.velocity.y+=.001*_.msPerFrame,this.y+=this.velocity.y*_.msPerFrame,this.yCenter>Gt.yCenter&&mt.startBossDyingPhase()),this.draw())}};class Y extends n{constructor(){super({x:4236,y:192,width:8,height:136})}}var Q;Q=new URL(o("27Lyk").resolve("hyBbh"),import.meta.url).toString();const Z=new class extends n{constructor(){super({x:4236,y:192,width:8,height:192}),this.img=k(new URL(Q)),this.show=!0,this.flammableBitOfRope=new Y}update(){this.show&&this.draw()}draw(){const t=this.localLeft,e=this.localTop,i=this.width,s=this.height;this.img&&l.drawImage(this.img,t,e,i,s)}};const $=new class{constructor(){this.buttons=document.getElementById("buttons")}show(){this.buttons.classList.remove("hidden")}hide(){this.buttons.classList.add("hidden")}setOpacity(t){this.buttons.style.opacity=t}};async function tt(t){return new Promise((e=>setTimeout(e,t)))}const et=0,it=1,st=2,ot=3,at=4,nt=5,rt=6,ht=7;var lt;lt=new URL(o("27Lyk").resolve("4QDKv"),import.meta.url).toString();const mt=new class{constructor(){this.backDoorImage=k(new URL(lt)),this.showBackDoor=!1,this.phase=et}startStartPhase(){this.phase>=it||(this.phase=it,$.show())}startTunnelPhase(){this.phase>=st||(S.tunnelMusic.play(),this.phase=st)}startBossFightPhase(){this.phase>=ot||(S.tunnelMusic.pause(),S.bossFightMusic.play(),this.showBackDoor=!0,F.show=!0,M.push(new A({right:3456,bottom:864,top:800})),K.add({left:3422,top:798}),K.add({left:3422,top:830}),S.playDoorslamSound(),this.phase=ot)}async startRopeBurningPhase(){this.phase>=at||(S.bossFightMusic.pause(),this.phase=at,K.add({left:4224,top:192}),S.playRopeExplosionSound(),await tt(200),K.add({left:4224,top:224}),S.playRopeExplosionSound(),await tt(200),K.add({left:4224,top:256}),S.playRopeExplosionSound(),await tt(200),K.add({left:4224,top:288}),S.playRopeExplosionSound(),await tt(200),K.add({left:4224,top:320}),S.playRopeExplosionSound(),this.startRopeFallingPhase())}async startRopeFallingPhase(){this.phase>=nt||(this.phase=nt,G.dropped=!0)}async startBossDyingPhase(){this.phase>=rt||(this.phase=rt,F.die(),G.show=!1,Z.show=!1,K.add({left:4291,top:642}),K.add({left:4283,top:676}),K.add({left:4264,top:681}),K.add({left:4282,top:688}),K.add({left:4186,top:621}),K.add({left:4194,top:649}),K.add({left:4203,top:642}),K.add({left:4223,top:664}),K.add({left:4219,top:668}),K.add({left:4203,top:686}),K.add({left:4200,top:670}),K.add({left:4200,top:700}),K.add({left:4205,top:792}),K.add({left:4248,top:730}),K.add({left:4154,top:686}),K.add({left:4126,top:725}),K.add({left:4214,top:598}),S.playDeathSound(),await tt(300),K.add({left:4159,top:654}),S.playBossExplosionSound(),await tt(300),K.add({left:4161,top:706}),S.playBossExplosionSound(),await tt(300),K.add({left:4274,top:851}),S.playBossExplosionSound(),await tt(300),K.add({left:4206,top:734}),S.playBossExplosionSound(),await tt(300),K.add({left:4192,top:733}),S.playBossExplosionSound(),await tt(300),K.add({left:4203,top:732}),S.playBossExplosionSound(),await tt(300),K.add({left:4252,top:546}),S.playBossExplosionSound(),await tt(300),this.startEndPhase())}async startEndPhase(){this.phase>=ht||(this.phase=ht,K.add({left:4237,top:560}),K.add({left:4205,top:596}),K.add({left:4251,top:603}),K.add({left:4231,top:642}),K.add({left:4295,top:644}),K.add({left:4249,top:656}),K.add({left:4243,top:681}),K.add({left:4203,top:684}),K.add({left:4266,top:684}),K.add({left:4219,top:692}),K.add({left:4215,top:700}),K.add({left:4293,top:730}),K.add({left:4126,top:740}),K.add({left:4187,top:746}),K.add({left:4224,top:750}),K.add({left:4199,top:767}),K.add({left:4176,top:768}),K.add({left:4296,top:813}),K.add({left:4161,top:820}),K.add({left:4179,top:844}),K.add({left:4180,top:882}),S.playDeathSound(),await tt(2e3),S.endCreditsMusic.play())}drawBackDoor(){l.drawImage(this.backDoorImage,3424-a.x,800-a.y,32,64)}};var dt;dt=new URL(o("27Lyk").resolve("7KoA1"),import.meta.url).toString();var pt;pt=new URL(o("27Lyk").resolve("667pP"),import.meta.url).toString();var ct;ct=new URL(o("27Lyk").resolve("8r3C2"),import.meta.url).toString();var wt;wt=new URL(o("27Lyk").resolve("5zhPX"),import.meta.url).toString();var ft;ft=new URL(o("27Lyk").resolve("ChCQb"),import.meta.url).toString();var gt;gt=new URL(o("27Lyk").resolve("3GX9f"),import.meta.url).toString();const ut=[k(new URL(dt)),k(new URL(pt)),k(new URL(ct)),k(new URL(wt)),k(new URL(ft)),k(new URL(gt))];class yt extends n{constructor({left:t,bottom:e,facingRight:i}){super({x:t,y:e-21,width:43,height:21}),this.frames=new E({images:ut,fps:14}),this.facingRight=i}draw(){const t=this.frames.get();this.facingRight?l.drawImage(t,this.localLeft,this.localTop,this.width,this.height):(l.save(),l.scale(-1,1),l.drawImage(t,-1*this.localRight,this.localTop,this.width,this.height),l.restore())}}const xt=new class{constructor(){this.plumes=[]}add({left:t,bottom:e,facingRight:i}){this.plumes.push(new yt({left:t,bottom:e,facingRight:i})),S.playLandSound()}update(){this.plumes=this.plumes.filter((t=>t.frames.currentIndex<5)),this.draw()}draw(){this.plumes.forEach((t=>t.draw()))}};const vt=new class{constructor(){this.keys={right:{pressed:!1},left:{pressed:!1},jump:{pressed:!1},attack:{pressed:!1}};const t=()=>{At.stunned||0!==At.velocity.y||(At.velocity.y-=.8333333333333334,S.playJumpSound())},e=()=>{At.stunned||(this.keys.right.pressed=!0,At.facingRight=!0)},i=()=>this.keys.right.pressed=!1,s=()=>{At.stunned||(this.keys.left.pressed=!0,At.facingRight=!1)},o=()=>this.keys.left.pressed=!1,a=()=>{!At.stunned&&_.now>At.lastAttack+150&&At.attack()};addEventListener("keydown",(i=>{if(mt.phase>=at)return;({" ":t,ArrowUp:t,ArrowRight:e,ArrowLeft:s}[i.key]??a)()})),addEventListener("keyup",(t=>{(0,{ArrowRight:i,ArrowLeft:o}[t.key])?.()}));if(matchMedia("(hover: none)").matches){document.getElementById("buttons").style.display="flex";const n=document.getElementById("right");n.addEventListener("touchstart",e),n.addEventListener("touchend",i);const r=document.getElementById("left");r.addEventListener("touchstart",s),r.addEventListener("touchend",o);document.getElementById("jump").addEventListener("touchstart",t);document.getElementById("attack").addEventListener("touchstart",a)}}};var Rt;Rt=new URL(o("27Lyk").resolve("dxwa7"),import.meta.url).toString();var Lt;Lt=new URL(o("27Lyk").resolve("8h0tV"),import.meta.url).toString();var bt;bt=new URL(o("27Lyk").resolve("3KlFR"),import.meta.url).toString();var St;St=new URL(o("27Lyk").resolve("7JVrz"),import.meta.url).toString();var _t;_t=new URL(o("27Lyk").resolve("h75ca"),import.meta.url).toString();var kt;kt=new URL(o("27Lyk").resolve("eviKv"),import.meta.url).toString();var It;It=new URL(o("27Lyk").resolve("l8X2g"),import.meta.url).toString();var Ht;Ht=new URL(o("27Lyk").resolve("b2z88"),import.meta.url).toString();var Ut;Ut=new URL(o("27Lyk").resolve("cWExs"),import.meta.url).toString();var Et;Et=new URL(o("27Lyk").resolve("lHjoE"),import.meta.url).toString();var Ft;Ft=new URL(o("27Lyk").resolve("na5dw"),import.meta.url).toString();var Tt;Tt=new URL(o("27Lyk").resolve("iWslX"),import.meta.url).toString();const At=new class extends n{constructor({x:t,y:e}){super({x:t,y:e,height:36,width:30}),this.hasFlame=!1,this.facingRight=!0,this.velocity={x:0,y:0},this.images={fall:k(new URL(Rt)),hit:k(new URL(Lt)),jump:k(new URL(bt)),still:k(new URL(St)),throw:k(new URL(_t)),walk1:k(new URL(kt)),walk2:k(new URL(It)),walk3:k(new URL(Ht)),stick:k(new URL(Ut)),flame1:k(new URL(Et)),flame2:k(new URL(Ft)),flame3:k(new URL(Tt))},this.walkFrames=new E({fps:12,images:[this.images.walk3,this.images.walk2,this.images.walk1]}),this.flameFrames=new E({fps:12,images:[this.images.flame1,this.images.flame2,this.images.flame3]}),this.lastAttack=0,this.lastHit=0}get flying(){return _.now-this.lastHit<500}get stunned(){return _.now-this.lastHit<1500}get blinking(){return _.now-this.lastHit<2e3}get nextFrame(){return new n({x:this.x+this.velocity.x*_.msPerFrame,y:this.y+this.velocity.y*_.msPerFrame,width:this.width,height:this.height})}attack(){this.hasFlame=!1,this.lastAttack=(new Date).valueOf(),$t.add({left:this.left+.5*this.width,top:this.top+.5*this.height,shootRight:this.facingRight})}land(){xt.add({left:this.left-43,bottom:this.bottom,facingRight:!1}),xt.add({left:this.right,bottom:this.bottom,facingRight:!0})}hurtByBoss(){this.hasFlame=!1,this.lastHit=(new Date).valueOf(),this.velocity.x=.8333333333333334*(this.facingRight?-1:1)}hurtByLaser(){this.hasFlame=!1,this.blinking||(this.velocity.y=-.8333333333333334,this.lastHit=(new Date).valueOf())}draw(){const t={x:0,y:0};let e;if(this.flying?e=this.images.hit:_.now-this.lastAttack<100?e=this.images.throw:this.velocity.y>0?(e=this.images.fall,t.x=1,t.y=-6):this.velocity.y<0?(e=this.images.jump,t.x=1):0!==this.velocity.x?(e=this.walkFrames.get(),t.x=1):e=this.images.still,this.blinking){if((_.now-this.lastHit)%500>300)return}this.facingRight?(l.drawImage(e,this.localLeft,this.localTop,this.width,this.height),this.hasFlame&&(l.drawImage(this.images.stick,this.localLeft+5+t.x,this.localTop+18+t.y,30,6),l.drawImage(this.flameFrames.get(),this.localLeft+20+t.x,this.localTop-7+t.y,28,28))):(l.save(),l.scale(-1,1),l.drawImage(e,-1*this.localRight,this.localTop,this.width,this.height),this.hasFlame&&(l.drawImage(this.images.stick,5-this.localRight+t.x,this.localTop+18+t.y,30,6),l.drawImage(this.flameFrames.get(),20-this.localRight+t.x,this.localTop-7+t.y,28,28)),l.restore())}update(){this.velocity.y+=.0023333333333333335*_.msPerFrame,this.flying?this.velocity.x*=.9:vt.keys.right.pressed?this.velocity.x=.26666666666666666:vt.keys.left.pressed?this.velocity.x=-.26666666666666666:this.velocity.x=0,M.forEach((t=>{(this.right>t.left&&this.left<t.right||this.nextFrame.right>t.left&&this.nextFrame.left<t.right)&&(this.bottom<=t.top&&this.nextFrame.bottom>=t.top?(this.y=t.y-this.height,this.velocity.y>.1*_.msPerFrame&&this.land(),this.velocity.y=0):this.top>=t.bottom&&this.nextFrame.top<=t.bottom&&(this.y=t.bottom,this.velocity.y=0)),(this.bottom>t.top&&this.top<t.bottom||this.nextFrame.bottom>t.top&&this.nextFrame.top<t.bottom)&&(this.right<=t.left&&this.nextFrame.right>=t.left&&(this.x=t.left-this.width,this.velocity.x=0),this.left>=t.right&&this.nextFrame.left<=t.right&&(this.x=t.right,this.velocity.x=0))})),this.x+=this.velocity.x*_.msPerFrame,this.y+=this.velocity.y*_.msPerFrame,this.hasFlame||(this.hasFlame=U.some((t=>this.intersects(t)))),this.draw(),this.intersects(Gt)&&this.hurtByBoss()}}({x:128,y:0});var Ot;Ot=new URL(o("27Lyk").resolve("hXnwJ"),import.meta.url).toString();var Bt;Bt=new URL(o("27Lyk").resolve("lnBAz"),import.meta.url).toString();var Pt;Pt=new URL(o("27Lyk").resolve("7EplB"),import.meta.url).toString();var Mt;Mt=new URL(o("27Lyk").resolve("4Svq4"),import.meta.url).toString();var Dt;Dt=new URL(o("27Lyk").resolve("9vpnS"),import.meta.url).toString();var Ct;Ct=new URL(o("27Lyk").resolve("2q010"),import.meta.url).toString();var jt;jt=new URL(o("27Lyk").resolve("4bprI"),import.meta.url).toString();const zt=[k(new URL(Ot)),k(new URL(Bt)),k(new URL(Pt)),k(new URL(Mt)),k(new URL(Dt)),k(new URL(Ct)),k(new URL(jt))];class Wt extends n{constructor({left:t,top:e}){super({x:t,y:e,width:20,height:20}),this.laserFrames=new E({fps:24,images:zt}),this.startTime=_.now,this.finished=!1,this.hitPlayer=!1;const i=At.x-this.x,s=At.y-this.y,o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));this.dx=3*i/o,this.dy=3*s/o}update(){this.intersects(At)&&(At.hurtByLaser(),this.hitPlayer=!0),_.now-this.startTime>2e3&&(this.finished=!0,K.add({left:this.left,top:this.top})),this.x+=this.dx,this.y+=this.dy,this.draw()}draw(){l.drawImage(this.laserFrames.get(),this.localLeft,this.localTop,this.width,this.height)}}const Vt=new class{constructor(){this.lasers=[]}add({left:t,top:e}){this.lasers.push(new Wt({left:t,top:e})),S.playLaserSound()}update(){this.lasers=this.lasers.filter((t=>!t.finished&&!t.hitPlayer)),this.lasers.forEach((t=>t.update()))}};var Nt;Nt=new URL(o("27Lyk").resolve("dNc9w"),import.meta.url).toString();var Xt;Xt=new URL(o("27Lyk").resolve("eaxgJ"),import.meta.url).toString();var Jt;Jt=new URL(o("27Lyk").resolve("iVIce"),import.meta.url).toString();var Kt;Kt=new URL(o("27Lyk").resolve("eNkgn"),import.meta.url).toString();var qt;qt=new URL(o("27Lyk").resolve("eaKP5"),import.meta.url).toString();const Gt=new class extends n{constructor(){super({x:4128,y:608,height:256,width:192}),this.mode="attack",this.facingRight=!1,this.x=4128,this.y=608,this.velocity={x:0,y:0},this.images={attack:k(new URL(Nt)),die:k(new URL(Xt)),lookup:k(new URL(Jt)),move:k(new URL(Kt)),still:k(new URL(qt))},this.lastAttacked=0,this.recalculateModeAt=0}draw(){let t;this.width=204,t=this.images.move,mt.phase===rt?(this.width=192,t=this.images.die):"attack"===this.mode?t=this.images.attack:"still"===this.mode?t=this.images.still:this.top>At.bottom&&(this.width=192,t=this.images.lookup),this.facingRight?l.drawImage(t,this.localLeft,this.localTop,this.width,this.height):(l.save(),l.scale(-1,1),l.drawImage(t,-1*this.localRight,this.localTop,this.width,this.height),l.restore())}update(){if(mt.phase!==ht&&(this.draw(),mt.phase!==rt))switch(At.left>3616&&At.right<4864?mt.phase===at||mt.phase===nt||At.bottom<=320&&(At.left<Gt.left||At.right>Gt.right)?this.mode="move":_.now>this.recalculateModeAt&&(this.recalculateModeAt=_.now+2e3*Math.random(),this.mode=["move","attack","still"][Math.floor(3*Math.random())]):this.mode="still",this.facingRight=At.center>this.center,this.mode){case"attack":_.now>this.lastAttacked+150&&(Vt.add({left:this.facingRight?this.right-32:this.left+16,top:this.top+108}),this.lastAttacked=_.now);break;case"move":this.facingRight&&this.right<=4640?this.x+=2:!this.facingRight&&this.left>=3840&&(this.x-=2)}}};var Yt;Yt=new URL(o("27Lyk").resolve("9gHod"),import.meta.url).toString();const Qt=k(new URL(Yt));class Zt extends n{constructor({left:t,top:e,shootRight:i}){super({x:t,y:e,width:18,height:18}),this.img=Qt,this.startTime=(new Date).valueOf(),this.angle=0,this.finished=!1,this.velocity=-.7,this.turnsPerSecond=.25,this.shootRight=i,this.hitBoss=!1}update(){this.intersects(Gt)&&(this.hitBoss=!0,F.health-=.01),this.x+=.23333333333333334*_.msPerFrame*(this.shootRight?1:-1),this.velocity+=.0033333333333333335*_.msPerFrame,this.y+=this.velocity*_.msPerFrame,this.angle+=2*Math.PI*this.turnsPerSecond*(_.now-this.startTime)/1e3,this.draw()}draw(){l.save(),l.setTransform(1,0,0,1,this.localLeft,this.localTop),l.rotate(this.angle),l.drawImage(this.img,-9,-9,this.width,this.height),l.restore()}}const $t=new class{constructor(){this.axes=[]}add({left:t,top:e,shootRight:i}){this.axes.push(new Zt({left:t,top:e,shootRight:i})),S.playAxeThrowSound()}update(){this.axes=this.axes.filter((t=>_.now-t.startTime<6e3&&!t.hitBoss)),this.axes.forEach((t=>t.update()))}};new class{constructor(){}draw(){l.fillStyle="#000c",l.fillRect(0,0,200,200),l.fillStyle="#bbb",l.textAlign="left",l.font="bold 14px Inter",l.fillText("ms per frame",58,48),l.textAlign="right",l.fillStyle="white",l.fillText(_.msPerFrame,28,48),l.fillStyle="#bbb",l.textAlign="left",l.font="bold 14px Inter",l.fillText(At.velocity.y,58,68)}};class te{constructor({timeIn:t,timeOut:e,text:i}){this.timeIn=t,this.timeOut=e,this.text=i}draw(){const t=S.endCreditsMusic.currentTime;t<this.timeIn||t>this.timeOut||(l.textAlign="center",l.font="500 14px Inter",l.fillText(this.text,352,256))}}class ee{constructor({heading:t,lines:e,src:i,timeIn:s,timeOut:o,fadeTime:a}){this.img=k(new URL(i,"file:///js/slides.js")),this.heading=t,this.lines=e,this.timeIn=s,this.timeOut=o,this.fadeTime=a}draw(){const t=S.endCreditsMusic.currentTime;if(t<this.timeIn||t>this.timeOut)return;t-this.timeIn<this.fadeTime?h.style.opacity=(t-this.timeIn)/this.fadeTime:this.timeOut-t<this.fadeTime&&(h.style.opacity=(this.timeOut-t)/this.fadeTime);l.drawImage(this.img,102,156,200,200),l.textAlign="center",l.font="500 14px Inter",l.fillText(this.heading,502,246),l.font="400 12px Inter",this.lines.forEach(((t,e)=>{l.fillText(t,502,261+15*e)}))}}class ie{constructor({heading:t,lines:e,src:i,timeIn:s,timeOut:o,fadeTime:a}){this.img=k(new URL(i,"file:///js/slides.js")),this.timeIn=s,this.timeOut=o,this.fadeTime=a,this.heading=t,this.lines=e}draw(){const t=S.endCreditsMusic.currentTime;if(t<this.timeIn||t>this.timeOut)return;t-this.timeIn<this.fadeTime?h.style.opacity=(t-this.timeIn)/this.fadeTime:this.timeOut-t<this.fadeTime&&(h.style.opacity=(this.timeOut-t)/this.fadeTime);l.drawImage(this.img,402,156,200,200),l.textAlign="center",l.font="500 14px Inter",l.fillText(this.heading,202,246),l.font="400 12px Inter",this.lines.forEach(((t,e)=>{l.fillText(t,202,261+15*e)}))}}var se;se=new URL(o("27Lyk").resolve("8epLs"),import.meta.url).toString();var oe;oe=new URL(o("27Lyk").resolve("8QBwA"),import.meta.url).toString();var ae;ae=new URL(o("27Lyk").resolve("4HnJa"),import.meta.url).toString();var ne;ne=new URL(o("27Lyk").resolve("aIy24"),import.meta.url).toString();const re=[new class{constructor({timeIn:t,timeOut:e,fadeTime:i}){this.timeIn=t,this.timeOut=e,this.fadeTime=i}draw(){const t=S.endCreditsMusic.currentTime;t<this.timeIn||t>this.timeOut||(t-this.timeIn<this.fadeTime?h.style.opacity=(t-this.timeIn)/this.fadeTime:this.timeOut-t<this.fadeTime&&(h.style.opacity=(this.timeOut-t)/this.fadeTime),l.textAlign="center",l.font="500 14px Inter",l.fillText("You Have To Burn The Rope",352,246),l.font="400 12px Inter",l.fillText("Thank you for playing!",352,266))}}({timeIn:3.158386,timeOut:10.540059,fadeTime:.45}),new ee({heading:"Design, Code, Graphics",lines:["Kian Bashiri","(mazapan.se)"],src:new URL(se),timeIn:11.89449,timeOut:19.374947,fadeTime:.45}),new ie({heading:"Music",lines:["Henrik Nåmark","(reachground.se)"],src:new URL(oe),timeIn:20.633224,timeOut:28.119119,fadeTime:.45}),new ee({heading:"Additional Design",lines:["Henrik Nåmark","Christian Dryden"],src:new URL(ae),timeIn:29.364552,timeOut:36.967399,fadeTime:.45}),new ie({heading:"Special thanks to",lines:["Umami"],src:new URL(ne),timeIn:38.17481,timeOut:45.787413,fadeTime:.45}),new te({timeIn:52.289314,timeOut:53.952062,text:"Now you're a hero"}),new te({timeIn:53.952062,timeOut:55.10938,text:"You managed to"}),new te({timeIn:55.10938,timeOut:58.198456,text:"beat the whole damn ga-ame"}),new te({timeIn:59.330643,timeOut:61.15019,text:"We're happy you made it"}),new te({timeIn:61.350186,timeOut:63.122842,text:"But how are you gonna spend"}),new te({timeIn:63.122842,timeOut:65.466856,text:"the rest of this da-ay"}),new te({timeIn:67.011187,timeOut:70.684104,text:"Maybe watch a video"}),new te({timeIn:70.684104,timeOut:72.576486,text:"Maybe press refresh"}),new te({timeIn:72.576486,timeOut:73.537913,text:"and start again"}),new te({timeIn:74.415235,timeOut:76.077983,text:"Now you're a hero"}),new te({timeIn:76.077983,timeOut:77.235301,text:"You managed to"}),new te({timeIn:77.235301,timeOut:80.324377,text:"beat the whole damn ga-ame"}),new te({timeIn:81.456564,timeOut:83.276111,text:"We're happy you made it"}),new te({timeIn:83.476107,timeOut:85.248763,text:"But how are you gonna spend"}),new te({timeIn:85.248763,timeOut:87.592777,text:"the rest of this da-ay"}),new te({timeIn:89.137108,timeOut:92.810025,text:"Maybe watch a video"}),new te({timeIn:92.810025,timeOut:94.702407,text:"Maybe press refresh"}),new te({timeIn:94.702407,timeOut:95.663834,text:"and start again"}),new te({timeIn:96.491651,timeOut:98.614725,text:"Yes it's over now"}),new te({timeIn:99.723953,timeOut:101.586446,text:"we didn't want to"}),new te({timeIn:101.586446,timeOut:103.916165,text:"make a longer game"}),new te({timeIn:103.916165,timeOut:105.039407,text:"This is it"}),new te({timeIn:105.039407,timeOut:107.117157,text:"I swear it's true"}),new te({timeIn:107.759486,timeOut:108.873535,text:"oohh ohh"}),new te({timeIn:111.125234,timeOut:112.787982,text:"Now you're a hero"}),new te({timeIn:112.787982,timeOut:113.9453,text:"You managed to"}),new te({timeIn:113.9453,timeOut:117.034376,text:"beat the whole damn ga-ame"}),new te({timeIn:118.166563,timeOut:119.98611,text:"We're happy you made it"}),new te({timeIn:120.186106,timeOut:121.958762,text:"But how are you gonna spend"}),new te({timeIn:121.958762,timeOut:124.302776,text:"the rest of this da-ay"}),new te({timeIn:125.847107,timeOut:129.520024,text:"Maybe watch a video"}),new te({timeIn:129.520024,timeOut:131.412406,text:"Maybe press refresh"}),new te({timeIn:131.412406,timeOut:132.373833,text:"and start again"}),new class{constructor({timeIn:t,fadeTime:e,text:i}){this.timeIn=t,this.fadeTime=e,this.text=i}draw(){const t=S.endCreditsMusic.currentTime;t<this.timeIn||(t-this.timeIn<this.fadeTime&&(h.style.opacity=(t-this.timeIn)/this.fadeTime),l.textAlign="center",l.font="500 14px Inter",l.fillText(this.text,352,256))}}({timeIn:134.084787,fadeTime:3,text:"Game over"})];var he;he=new URL("up_/"+o("27Lyk").resolve("eIDjz"),import.meta.url).toString(),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register(he).then((t=>console.log("Success: ",t.scope))).catch((t=>console.log("Failure: ",t)))})),document.getElementById("show-info").addEventListener("click",(()=>{document.getElementById("info").classList.remove("hidden")})),document.getElementById("hide-info").addEventListener("click",(()=>{document.getElementById("info").classList.add("hidden")})),document.getElementById("canvas").addEventListener("click",(()=>{mt.startStartPhase()}));var le;le=new URL(o("27Lyk").resolve("hhCdh"),import.meta.url).toString();const me=new class{constructor(){this.img=new Image,this.img.src=new URL(le)}draw(){const t=a.x,e=a.y;this.img&&l.drawImage(this.img,t,e,704,512,0,0,704,512)}};!function t(){const e=(new Date).valueOf();if(_.msPerFrame=e-_.now,_.now=e,requestAnimationFrame(t),l.clearRect(0,0,h.width,h.height),mt.phase===et)return l.fillStyle="white",l.textAlign="center",l.font="500 14px Inter",void l.fillText("Click to start",352,256);S.endCreditsMusic.currentTime<2?(me.draw(),mt.showBackDoor&&mt.drawBackDoor(),Gt.update(),At.update(),Z.update(),G.update(),K.update(),xt.update(),$t.update(),Vt.update(),F.update(),U.forEach((t=>t.draw())),h.style.opacity=(2-S.endCreditsMusic.currentTime)/2,$.setOpacity((2-S.endCreditsMusic.currentTime)/2)):(h.style.opacity=1,$.hide()),At.left>=3456?mt.startBossFightPhase():At.left>=192&&mt.startTunnelPhase(),l.fillStyle="white",re.forEach((t=>t.draw())),At.hasFlame&&At.intersects(Z.flammableBitOfRope)&&(At.hasFlame=!1,mt.startRopeBurningPhase()),(At.localRight>400&&a.x+704<5120&&At.velocity.x>0||At.localLeft<200&&a.x>0&&At.velocity.x<0)&&(a.x+=At.velocity.x*_.msPerFrame),(At.localTop<175&&a.y>0&&At.velocity.y<0||At.localBottom>200&&a.y+512<960&&At.velocity.y>0)&&(a.y+=At.velocity.y*_.msPerFrame)}();
//# sourceMappingURL=index.e00e8786.js.map
